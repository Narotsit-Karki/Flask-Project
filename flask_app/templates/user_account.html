<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<body>

{% extends 'layout.html' %}
{% block content %}
<style>
    .content-section{
        border-radius: 5px;
        background-color: #f2f2f2;
        padding: 5px;
        margin: 5%;
        # width: 100%;
       }
     img{
        width: 15%;
        height: 15%;
        padding: 2%;
        }
    .account-img{
        height: 125px;
        width: 125px;
        }
</style>

<div class = "content-section">
    <div class = "media">
            <img class= "rounded-circle account-img" src = "{{image_file}}">
            <div class = "media-body" style=" margin-left: 2%; position: relative;">

                <h2 class = "account-heading">
                        {{current_user.username}}
                </h2>
                <p class = 'text-secondary'> {{current_user.email}} </p>

            </div>
    </div>

<div class = "container">
    <form method = "POST" action="" enctype ="multipart/form-data">
         {{ form.hidden_tag() }}
<!--         adding csrf token-->
        <fieldset class = "form-group">
            <legend class = "border-bottom mb-4">
                Account Info
                <hr class="dashed">
                <div class = "form-group">
                    {{ form.username.label(class = "form-control-label") }}
                    {% if form.username.errors %}
                        {{ form.username(class = "form-control form-control-md is-invalid") }}
                        <div class = "invalid-feedback">
                            {% for error in form.username.errors %}
                                <span> {{ error }} </span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.username(class = "form-control form-control-md", value = current_user.username) }}
                    {% endif %}

                </div>
                <div class = "form-group">
                     <div class = "form-group">
                    {{ form.email.label(class = "form-control-label") }}
                         {% if form.email.errors %}
                            {{ form.email(class = "form-control form-control-md is-invalid") }}
                        <div class = "invalid-feedback">
                            {% for error in form.email.errors %}
                                <span> {{ error }} </span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.email(class = "form-control form-control-md",value = current_user.email) }}
                    {% endif %}
                </div>
                </div>
            </legend>
        </fieldset>
        <div class = "form-group" >
            {{ form.profile_pic.label() }}
            <br/>
            {{ form.profile_pic(class = "form-control-file primary", style = "padding: 1%;") }}
            {% if form.profile_pic.errors %}
                {% for error in form.profile_pic.errors %}
                   <br/> <span class="text-danger" style="margin-bottom: 1px;"> {{ error }} </span>
                {% endfor %}
            {% endif %}
        </div>
        <div class = "form-group" style="margin-left:1%;">
            {{ form.update(class = "btn btn-primary") }}
        </div>
    </form>
</div>
</div>
</body>

{% endblock content %}
</html>