{% extends "layout.html" %}
{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/feather-icons"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style type="text/css">
.container {
  width: 90%;
  #height: 80%;
  box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .2);
  border-radius: 5px;
  position: relative;
  z-index: 1;
  background: inherit;
  overflow: hidden;
  margin-top: 4%;
  margin-bottom: 1%;
}

</style>

<script>

</script>

<!--    <div class = "container">-->
<body background="{{back_path}}" style="background-size:100% 100%; background-repeat:repeat;"> 
 <!-- <body background = ''>  -->
<div class='container' style="padding: 3%"><!-- 
    <h2 class="text-muted" style = "text-align:center; color: white;">
    </h2> -->

    {% if current_user.is_authenticated %}
     <a href = "{{url_for('new_post') }}"><div class="fa fa-plus-circle" data-toggle="tooltip" data-placement="top" title="Add a new post" style="font-size:250%; color:white;"> </div> </a>
    {% endif %}
    {% for post in post_datas.items %}
    <div style="padding:2%;"></div>
    <div class="shadow p-3 mb-5 bg-white rounded card text-black" style="...">
        <div class="card-body">
            <h5 class="card-title" style= "color:purple;">{{post.title}}</h5>
            <h6 class="card-subtitle mb-2 text-muted">     
                <img src= "/static/profile_pics/{{post.author.image_file}}" alt ='Avatar' class = 'avatar' style="object-fit: cover;vertical-align: middle;width: 50px;height: 50px;border-radius: 50%;">         
                <!-- <img class= "rounded-circle account-img" src = '/static/profile_pics/{{post.author.image_file}}' style = "width: 55px; height: 55px;object-fit: cover;">  -->
              
                @<a name="Author" href = "/authour/{{post.author.username}}/1" style="text-decoration: none;">{{post.author.username}}</a>
               
            </h6>
            <h6 class="card-subtitle mb-1 text-muted">{{ post.date_posted.strftime('%B %d, %Y') }}</h6>
            
            <p class="card-text" style = "white-space: pre-line;letter-spacing: 1px;" id="content">{{post.content}}</p>


            <button type="button" class="btn" data-bs-toggle="collapse" data-bs-target=#post_{{post.pid}}
                    aria-expanded="false" aria-controls="collapseExample">
                <i class = "fa fa-comments-o" style="font-size: 190%;color:purple"></i>
            </button>

            <div class="collapse" id= post_{{post.pid}} style="padding : 1rem; width: 100%;">

                <div class="card card-body" style="padding: 1rem;">
                    <form method="POST" action="/create-comment/{{post.pid}}">
                        <div class="input-group mb-3">
                            <input type = "text" id = "text" name = "text" class = "form-control form-control-md" placeholder=" Write your comment" required />
                            <button type = "submit" class = "btn btn-success">Submit</button>

                        </div>
            {% for comment in post.posts_comments%}

                        <!-- {% if comment.post_id == post.pid %} -->
                            <div class="collapse" id= post_{{post.pid}} >
                                <div class="card card-body" style="padding: 1rem;width: 100%;">
                                <h6 class="card-subtitle mb-1 text-muted"> <img class= "rounded-circle account-img" src = "/static/profile_pics/default.jpg" style = "width: 9%; height: 9%;"><a href = "/authour/{{comment.comment_user.username}}?page=1" style="text-decoration:none;">@{{ comment.comment_user.username}}</a></h6>
                                <h6 class="card-subtitle mb-0 text-muted">{{comment.date_commented.strftime('%B, %d %Y')}}</h6>
                                <p class="card-text" style = "white-space: pre-line;">{{comment.comment}}</p>
                            </div>
                          </div>
                          <!-- {% endif %} -->
            {% endfor %}

                    </form>
                </div>

            </div>
        </div>
    </div>


    {% endfor %}

</div>
<div style="margin-left: 10%;">
{% for page_no in post_datas.iter_pages(left_edge = 1, right_edge = 1 , left_current = 1 , right_current = 2) %}
    {% if page_no %}
        {%if post_datas.page == page_no %}
            <a class = "mb-4" href = "{{url_for('posts',page = page_no)}}"><button style="color: purple;font-size: 20px;border: none; border-radius:5px;background-color:white;">{{page_no}}</button></a>
        {% else %}

            <a class = "mb-4" href = "{{url_for('posts',page = page_no)}}"><button style="color: white;font-size: 20px;border: none; border-radius:5px;background-color: purple;">{{page_no}}</button></a>
        {% endif %}
    {% else %}
    ...
    {% endif %}
{%endfor %}
</div>

<nav class="navbar bottom navbar-dark bg-dark" style="margin-top: 5%;">
  <a class="navbar-brand" href="/posts" >
    <img src="/static/velvet.ico" width="30" height="30" class="d-inline-block align-top" alt="" style="margin-left: 3%;"> Velvet Posts
    <a class = "navbar-brand fa fa-github" href = "https://www.github.com/Narotsit-Karki" style="font-size:22px;"> <label style="font-family:myFirstFont;">Narotsit</label></a>
</a>
</nav>

{% endblock content %}


</body>
